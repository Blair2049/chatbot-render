# Stakeholder Management Chatbot - 第一版

## 项目概述
这是一个基于LightRAG框架开发的利益相关者管理聊天机器人，支持中英文双语交互，具备智能模式选择和评分系统。

## 文件结构
```
chatbot第一版/
├── chatbot_web.py                    # Web界面主程序
├── stakeholder_management_chatbot_sync.py  # 后端同步版本
├── templates/
│   └── index.html                    # Web前端界面
├── stakeholder_management_rag_sync/  # RAG数据存储
│   ├── graph_chunk_entity_relation.graphml
│   ├── kv_store_*.json              # 各种KV存储文件
│   └── vdb_*.json                   # 向量数据库文件
├── requirements.txt                  # Python依赖包
├── setup_env.sh                     # 环境设置脚本
├── README_stakeholder_chatbot.md    # 详细开发文档
└── README.md                        # 本文件
```

## 主要功能特性

### 1. 多语言支持
- 自动检测用户输入语言（中文/英文）
- 智能切换提示词语言
- 支持中英文混合输入

### 2. 智能模式选择
- **Naive模式**: 基础检索模式
- **Local模式**: 基于关键词的局部检索
- **Global模式**: 基于图结构的全局检索  
- **Hybrid模式**: 结合局部和全局的混合检索
- **Mix模式**: 混合多种检索策略
- 自动选择最佳模式并显示所有模式评分

### 3. 智能评分系统
- **完整性评分**: 评估回答的全面性和详细程度
- **多样性评分**: 评估回答中词汇和概念的丰富度
- **启发性评分**: 评估回答是否具有指导性和建议性 ###后续继续Prompt Engineering
- 实时评分反馈，帮助用户了解回答质量

### 4. Web界面
- 现代化响应式设计
- 实时聊天界面
- 统计信息显示
- 聊天历史记录
- 测试模式功能
- 多语言支持（中英文）
- 智能模式选择
- 实时评分反馈

## 快速开始

### 1. 环境准备
```bash
# 设置API密钥
export OPENAI_API_KEY="your-api-key-here"

# 安装依赖
pip install -r requirements.txt
```

### 2. 启动Web服务
```bash
python chatbot_web.py
```

### 3. 访问界面
打开浏览器访问: http://localhost:8081

## 技术架构

### 后端技术栈
- **LightRAG**: 轻量级RAG框架
- **Flask**: Web框架
- **OpenAI API**: 大语言模型服务
- **Nano-VectorDB**: 向量数据库
- **NumPy**: 数值计算（用于向量操作）
- **TikToken**: Token计算

### 前端技术栈
- **HTML5/CSS3**: 页面结构和样式
- **JavaScript**: 交互逻辑
- **Bootstrap**: UI组件库
- **Chart.js**: 图表展示

## 数据存储

### RAG数据
- **图结构**: 实体关系图 (4403节点, 2986边)
- **向量数据库**: 实体、关系、文本块向量
- **KV存储**: 文档状态、缓存、文本块等

### 缓存机制
- LLM响应缓存
- 文档状态缓存
- 查询结果缓存

## 开发过程

### 主要事件
1. **初始开发**: 基于《圣诞颂歌》文本的LightRAG应用
2. **问题解决**: 修复异步同步混用、API配置等问题
3. **功能扩展**: 添加多文档支持、智能提示词
4. **Web界面**: 开发完整的Web交互界面
5. **优化完善**: 多语言支持、评分系统、最佳模式选择

### 技术
- 智能语言检测和提示词切换
- 多模式检索和自动选择
- 实时评分和反馈系统
- 完整的Web交互体验
- 向量化检索优化
- 缓存机制优化
- Token成本计算
- 三维评分算法（完整性、多样性、启发性）

## 使用说明

### 基本操作
1. 在聊天框输入问题（支持中英文）
2. 系统自动选择最佳检索模式
3. 查看回答和评分结果
4. 使用测试模式验证功能

### 高级功能
- 查看统计信息了解系统使用情况
- 浏览聊天历史回顾对话
- 测试不同模式的效果对比

## 注意事项

1. **API密钥**: 确保正确设置OpenAI API密钥
2. **端口占用**: 默认使用8081端口，如被占用请修改
3. **数据完整性**: RAG数据文件较大，确保完整复制
4. **依赖版本**: 严格按照requirements.txt安装依赖
5. **内存要求**: 建议至少4GB内存用于向量数据库
6. **网络连接**: 需要稳定的网络连接访问OpenAI API

## 版本信息
- **版本**: 第一版
- **开发时间**: 2024年6月
- **框架**: LightRAG + Flask
- **状态**: 功能完整，可正常使用
- **支持模式**: Naive, Local, Global, Hybrid, Mix
- **数据规模**: 4403节点, 2986边, 346文本块
- **向量维度**: 1536维

---

*这是一个功能完整的利益相关者管理聊天机器人，具备现代化的Web界面和智能的检索能力。* # 触发重新部署 - Thu Jul  3 13:18:30 AEST 2025
# 触发重新部署 - Fri Jul 11 16:59:32 AEST 2025
